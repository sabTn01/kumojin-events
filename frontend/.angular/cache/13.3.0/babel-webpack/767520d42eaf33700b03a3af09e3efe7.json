{"ast":null,"code":"import _asyncToGenerator from \"/Users/sbenhadj/Repositories/test/kumojin-events/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { TestBed } from '@angular/core/testing';\nimport { KumojinEventListComponent } from './kumojin-event-list.component';\nimport { KumojinEventHttpService } from '../../../../foundation/mainstack/kumojin-events/services/kumojin-event-http.service';\nimport { KumojinEvent } from '../../../../foundation/mainstack/kumojin-events/models/kumojin-event';\nimport { of } from 'rxjs';\nimport { HttpClientTestingModule } from '@angular/common/http/testing';\ndescribe('KumojinEventListComponent', () => {\n  let component;\n  let fixture;\n  let mockService;\n  let eventListMock = new Array();\n  let eventMock1 = new KumojinEvent();\n  let eventMock2 = new KumojinEvent();\n  eventMock1 = {\n    guid: 'guid1',\n    displayName: 'name1',\n    description: 'description1',\n    startAt: new Date(2022, 1, 1, 0, 0, 0),\n    endAt: new Date(2022, 1, 1, 15, 0, 0),\n    countryAt: 'Mexico'\n  };\n  eventMock2 = {\n    guid: 'guid2',\n    displayName: 'name2',\n    description: 'description2',\n    startAt: new Date(2022, 1, 1, 0, 0, 0),\n    endAt: new Date(2022, 1, 1, 15, 0, 0),\n    countryAt: 'Spain'\n  };\n  beforeEach( /*#__PURE__*/_asyncToGenerator(function* () {\n    mockService = jasmine.createSpyObj('KumojinEventHttpService', {\n      list: of(eventListMock)\n    });\n    yield TestBed.configureTestingModule({\n      declarations: [KumojinEventListComponent],\n      imports: [HttpClientTestingModule],\n      providers: [{\n        provide: KumojinEventHttpService,\n        useValue: mockService\n      }]\n    }).compileComponents();\n    fixture = TestBed.createComponent(KumojinEventListComponent);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n  }));\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n  it('ngOnInit, should deactivate loading', () => {\n    // Arrange\n    // Act\n    component.ngOnInit(); // Assert\n\n    expect(component.isLoading).toBeFalsy();\n  });\n  it('ngOnInit, should fetch a list of events', () => {\n    // Arrange\n    eventListMock.push(eventMock1);\n    eventListMock.push(eventMock2); // Act\n\n    component.ngOnInit(); // Assert\n\n    expect(component.events.length).toEqual(2);\n    expect(component.isLoading).toBeFalsy();\n  });\n  it('onDisplayForm, should display the form', () => {\n    // Arrange\n    // Act\n    component.onDisplayForm(); // Assert\n\n    expect(component.displayForm).toBeTruthy();\n  });\n  it('onSaveComplete, should fetch the events and hide the form', () => {\n    // Arrange\n    // Act\n    mockService.list().subscribe(events => {\n      // Assert\n      expect(events.length).toEqual(2);\n      expect(events[0].displayName).toEqual('name1');\n      expect(events[1].displayName).toEqual('name2');\n    });\n    const request = httpMock.expectOne(kumojinEventApiUrl);\n    expect(request.request.method).toBe('GET');\n    request.flush(eventListMock); // Act\n\n    component.onSaveComplete(); // Assert\n\n    expect(component.displayForm).toBeFalsy();\n  });\n});","map":{"version":3,"sources":["/Users/sbenhadj/Repositories/test/kumojin-events/frontend/src/app/features/mainstack/kumojin-events/list/kumojin-event-list.component.spec.ts"],"names":["TestBed","KumojinEventListComponent","KumojinEventHttpService","KumojinEvent","of","HttpClientTestingModule","describe","component","fixture","mockService","eventListMock","Array","eventMock1","eventMock2","guid","displayName","description","startAt","Date","endAt","countryAt","beforeEach","jasmine","createSpyObj","list","configureTestingModule","declarations","imports","providers","provide","useValue","compileComponents","createComponent","componentInstance","detectChanges","it","expect","toBeTruthy","ngOnInit","isLoading","toBeFalsy","push","events","length","toEqual","onDisplayForm","displayForm","subscribe","request","httpMock","expectOne","kumojinEventApiUrl","method","toBe","flush","onSaveComplete"],"mappings":"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","sourcesContent":["import { TestBed } from '@angular/core/testing';\nimport { KumojinEventListComponent } from './kumojin-event-list.component';\nimport { KumojinEventHttpService } from '../../../../foundation/mainstack/kumojin-events/services/kumojin-event-http.service';\nimport { KumojinEvent } from '../../../../foundation/mainstack/kumojin-events/models/kumojin-event';\nimport { of } from 'rxjs';\nimport { HttpClientTestingModule } from '@angular/common/http/testing';\ndescribe('KumojinEventListComponent', () => {\n    let component;\n    let fixture;\n    let mockService;\n    let eventListMock = new Array();\n    let eventMock1 = new KumojinEvent();\n    let eventMock2 = new KumojinEvent();\n    eventMock1 = {\n        guid: 'guid1',\n        displayName: 'name1',\n        description: 'description1',\n        startAt: new Date(2022, 1, 1, 0, 0, 0),\n        endAt: new Date(2022, 1, 1, 15, 0, 0),\n        countryAt: 'Mexico'\n    };\n    eventMock2 = {\n        guid: 'guid2',\n        displayName: 'name2',\n        description: 'description2',\n        startAt: new Date(2022, 1, 1, 0, 0, 0),\n        endAt: new Date(2022, 1, 1, 15, 0, 0),\n        countryAt: 'Spain'\n    };\n    beforeEach(async () => {\n        mockService = jasmine.createSpyObj('KumojinEventHttpService', {\n            list: of(eventListMock)\n        });\n        await TestBed.configureTestingModule({\n            declarations: [KumojinEventListComponent],\n            imports: [HttpClientTestingModule],\n            providers: [{ provide: KumojinEventHttpService, useValue: mockService }],\n        })\n            .compileComponents();\n        fixture = TestBed.createComponent(KumojinEventListComponent);\n        component = fixture.componentInstance;\n        fixture.detectChanges();\n    });\n    it('should create', () => {\n        expect(component).toBeTruthy();\n    });\n    it('ngOnInit, should deactivate loading', () => {\n        // Arrange\n        // Act\n        component.ngOnInit();\n        // Assert\n        expect(component.isLoading).toBeFalsy();\n    });\n    it('ngOnInit, should fetch a list of events', () => {\n        // Arrange\n        eventListMock.push(eventMock1);\n        eventListMock.push(eventMock2);\n        // Act\n        component.ngOnInit();\n        // Assert\n        expect(component.events.length).toEqual(2);\n        expect(component.isLoading).toBeFalsy();\n    });\n    it('onDisplayForm, should display the form', () => {\n        // Arrange\n        // Act\n        component.onDisplayForm();\n        // Assert\n        expect(component.displayForm).toBeTruthy();\n    });\n    it('onSaveComplete, should fetch the events and hide the form', () => {\n        // Arrange\n        // Act\n        mockService.list().subscribe(events => {\n            // Assert\n            expect(events.length).toEqual(2);\n            expect(events[0].displayName).toEqual('name1');\n            expect(events[1].displayName).toEqual('name2');\n        });\n        const request = httpMock.expectOne(kumojinEventApiUrl);\n        expect(request.request.method).toBe('GET');\n        request.flush(eventListMock);\n        // Act\n        component.onSaveComplete();\n        // Assert\n        expect(component.displayForm).toBeFalsy();\n    });\n});\n"]},"metadata":{},"sourceType":"module"}